---
layout: post
title:  "给新手站长们说说又拍云 CDN 的使用"
date:   2020-7-14-3:44:50
categories: ML
tags: Margin
excerpt: 给新手站长们说说又拍云 CDN 的使用

mathjax: true
---
又拍云 CDN 的优势
又拍云相对于七牛云来说更加的自由，七牛云 CDN 是基于七牛云存储上的静态文件来加速的，又拍云同样支持这种方式，同时还支持传统 CDN 的整站加速服务，也就是类似于阿里云 CDN 、百度云加速、腾讯云 CDN 等等这类的，对于我们草根站长来说完全可以根据自己的情况自由选择来部署 CDN 的。并且，又拍云在上述“自由”优势上还有不少特别适合我们草根博客站长们的实用的、高附加值的、免费的服务，具体总结如下：

1、又拍云 CDN 每月拥有 15G 的免费 HTTPS 流量，这对于目前 HTTPS 普及来说对我们草根站长绝对是个福音，记住是免费的哦！
2、不仅有免费的 HTTPS 流量，对 HTTPS 的优化支持也是众多 CDN 里少有全面，HSTS、HTTP/2、无损压缩算法 Brotli、动态 TLS Record Size 优化这些都有，这可不是普通 CDN 都能提供的哦！记住这也是免费默认开启的哦！

 
3、又拍云 CDN 同时还是一个拥有基本防护和防御能力的免费 CDN，比如：CC 防护、WAF 防火墙、HTTP 请求体大小限制等等 。
4、实用价值很高的“地区访问限制”，根据 IP 地址来分区域限制，这个在需要的时候绝对是个好东西。
5、支持自动化、智能化的“源站资源迁移”，可将源站静态资源无缝迁移到又拍云存储，当客户端下次访问相同的资源时，无需回用户自主源，提升站点载入性能。
给新手站长们说说又拍云 CDN 的使用给新手站长们说说又拍云 CDN 的使用给新手站长们说说又拍云 CDN 的使用

上述五条是根据博主自己使用又拍云 CDN 后对比其他 CDN 总结出来的又拍云 CDN 的优势，基本上都是我们草根博客站长们在使用 CDN 时的常用需求，特别是在启用部署了 SSL 后，又拍云在 HTTPS 方面的优势可以说是最明显的，另外对于“技术”小白的站长们来说又拍云 CDN 部署的简单性和智能化绝对是首选 CDN ，加入又拍云联盟后每月 15G 的免费流量完全可以满足新站点的流量需求的，新站点前期最需要的就是快速、稳定、高效、安全的运行环境，又拍云 CDN 可以很好的实现这样的刚需，让你在新站上线后主要精力放在原创内容输出上，而不是折腾优化、加速上。

又拍云 CDN 的入门级使用
有关又拍云的教程网上已经有了不少了，我就不多讲了，今天只讲一下新手站长们如何快速的将自己的站点接入又拍云 CDN 服务，有关又拍云的高级使用方法，以后我会抽时间再讲的。

首先注册又拍云账号并完成实名认证后登录又拍云控制台，在【基础产品』里“立即使用” CDN ，如下图红色箭头所指：

给新手站长们说说又拍云 CDN 的使用然后再【服务管理- CDN 』页面点击右边的“创建服务”，如下图：

给新手站长们说说又拍云 CDN 的使用进入【创建 CDN 服务』页面，更具自己站点实际情况填写相应的信息，如下图：

给新手站长们说说又拍云 CDN 的使用基本上照着提示填写就可以了，需要强调的是如果“回源协议”里选用了 HTTPS 的话，需要提前在又拍云控制台首页的【增值服务』里【SSL 证书』中导入自己站点的 SSL 证书哦，如果使用的是自己申请的 Let's Encrypt 证书的话，基本上用纯文本文件编辑器打开对应的证书文件（一般是两个 pem 和 key）复制粘贴即可。

完成了上述的步骤后，又拍云会有一个简单、快速的域名审核过程，一般 10 分钟内既可完成，理论上只要是国内备案的域名最多五分钟就会审核通过，通过后就会分配一个 CNAME 解析的记录值，这时候到你的 DNS 解析里把域名的 A 解析记录替换成 CNAME 解析到这个记录值就正式将站点接入到又拍云 CDN 服务了。


 
完成上述这些后，基本上就可以不用管了，因为又拍云 CDN 默认的配置就完全胜任你的站点的加速服务了，对于小白新手站长来说也就完成了又拍云 CDN 的部署和启用了，只需要等着 DNS 里的解析在各地生效即可（这个一般最多 72 个小时全部完成，请大家耐心等待就是，都是自动完成的，不需要人为操作啥的。）

又拍云 CDN 的进阶配置建议
按说又拍云 CDN 默认配置其实已经实现了站点开启 CDN 加速了，为了提升 CDN 加速的效果，可以进行一些进阶的设置来达到目的，这里要对新手站长们强调的是凡事都是有利有弊，又拍云 CDN 默认的配置流量消耗是很低的，加速效果也比较均衡（算是普普通通的吧！）。一旦我们通过进阶配置后，加速效果可能会有所提升，同时也意味着 CDN 流量消耗量加大了，考虑到成本和免费流量有限这个前提，博主不建议新手站长们过多的折腾，保持又拍云 CDN 默认配置是最经济的方案了，当然土豪可以无视的。

给新手站长们说说又拍云 CDN 的使用

所谓“进阶配置”其实也都是很简单的一些配置而已，比如：开启“回源管理”里面的“源站资源迁移”、“性能优化”里的“WebP 自适应”、“页面压缩”，“访问控制”里的“CORS 跨域共享”等等这些，如果是 HTTPS 的话，还需要在“HTTPS”里开启“HSTS”。

给新手站长们说说又拍云 CDN 的使用

不过，为了提高 CDN 的命中率（也就是提升 CDN 的加速效果），博主建议大家在“缓存控制”里的“缓存配置”中手动的指定静态文件的缓存时间，具体可参考下图：

给新手站长们说说又拍云 CDN 的使用

上述其实就是所谓的“缓存规则”了，又拍云 CDN 默认提供的规则都是很科学的，所以大家根据自己情况来选择使用就可以了。

上图是博主的博客目前使用的缓存规则， WordPress 站点的话建议采用我的这个缓存规则即可。

附录：又拍云官方默认缓存规则模版
首页：/ 缓存 12 小时；

目录页：/*/ 缓存 12 小时；

图片文件：/*.(jpg,jpeg,png,bmp,gif,psd,ico,tga,imb,tiff) 缓存 7 天；

文本文件：/*.(txt,doc,wri,docs,css,js,dot,xml,log,bat,csv) 缓存 1 天；

音视频文件：/*.(wav,mp3,wmv,rmi,aac,mp4,rmvb,mkv,avi,flv,swf,rm,mov,movie,qt) 缓存 7 天；

下载类文件：/*.(exe,ios,apk,ipa,pxl,sis,cab,deb,rar,zip,gzip,tar,7z,bzip2,dmg,gz,wim,tbz,tpz,z,jar) 缓存 7 天；

仅供参考哦！

另外，如果是 类似 WordPress/ Typecho 这样的动态站点的话，博主强烈建议大家手动配置“不缓存规则”，将动态文件设定为“不缓存”，这样是为了提升 CDN 的兼容性和稳定性，这点儿对国内某些所谓的“高速”浏览器比较稳定些。（纯经验之谈哦！）如下图：

给新手站长们说说又拍云 CDN 的使用

到这里基本上 CDN 端的设置也就基本完成了，如果你是个非技术型草根站长的话，这里还建议大家开启“缓存控制”里的“浏览器缓存”，这是对静态文件开启客户端本地缓存，对提升网页载入速度效果还是非常明显的，还可以节省一定的 CDN 流量消耗！ :grin:

给新手站长们说说又拍云 CDN 的使用给新手站长们说说又拍云 CDN 的使用

唯一需要强调的是“浏览器缓存配置”里的缓存时间不能大于缓存规则配置里的缓存时间，要不就会失效和紊乱（这算是内容分泌紊乱吧！ :lol: ）

至此，又拍云 CDN 的接入和部署就算是全部完成了，今天分享给大家算是一篇又拍云 CDN 的普及入门教程吧，未来博主会酌情分享些又拍云 CDN 高级进阶类的经验分享，希望可以帮到大家！

PS：这冬天坐在电脑前码字儿真心太痛苦了，手脚冰凉呀！

最后的建议，对于喜欢魔改自己站点主题啥的站长们，博主建议在使用 CDN 的时候就不要缓存 css、js 这类静态文件了！最好是强制回源(也就是不缓存里强制)，否则每次魔改后的更新缓存绝对是个相当“蛋疼”活儿。好了，欢迎大家在文章下面的评论里分享自己的又拍云 CDN 使用心得哦！